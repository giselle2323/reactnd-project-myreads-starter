(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,a,t){e.exports=t.p+"static/media/book.3a3c5142.svg"},17:function(e,a,t){e.exports=t(29)},22:function(e,a,t){},29:function(e,a,t){"use strict";t.r(a);var n=t(1),o=t.n(n),r=t(14),c=t.n(r),l=t(6),s=t(4),i=t(0),m=(t(22),t(11)),u="https://reactnd-books-api.udacity.com",h=localStorage.token;h||(h=localStorage.token=Math.random().toString(36).substr(-8));var d={Accept:"application/json",Authorization:h},b=t(15),f=t.n(b),k=function(){return o.a.createElement("div",{className:"hero-container"},o.a.createElement("div",{className:"hero-image-container"},o.a.createElement("div",{className:"hero-logo"},o.a.createElement(s.b,{to:"/"},"MyReads")),o.a.createElement("div",{className:"hero-image"},o.a.createElement("img",{src:f.a,alt:"book"}))),o.a.createElement("div",{className:"hero-text"},o.a.createElement("h1",{className:"hero-header-text"},"Welcome to MyReads"),o.a.createElement("p",{className:"hero-sub-header-text"},"Books never have an ending. "),o.a.createElement("button",{className:"hero-button"},o.a.createElement(s.b,{to:"/dashboard"},"Get Started"))))},E=function(e){var a=e.book,t=e.booksShelfChange;return a.shelf||(a.shelf="none"),o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"book-top"},o.a.createElement("div",{className:"book-cover",style:{width:"auto",height:193,backgroundSize:"cover",backgroundRepeat:"none",backgroundImage:"url(".concat(a.imageLinks?a.imageLinks.thumbnail:"https://via.placeholder.com/150",")")}}),o.a.createElement("div",{className:"book-shelf-changer"},o.a.createElement("select",{defaultValue:a.shelf,onChange:function(e){var n=e.target.value;t(a,n)}},o.a.createElement("option",{value:"anything",disabled:!0},"Move to..."),o.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),o.a.createElement("option",{value:"wantToRead"},"Want to Read"),o.a.createElement("option",{value:"read"},"Read"),o.a.createElement("option",{value:"none"},"None")))),o.a.createElement("div",{className:"book-title"},a.title),o.a.createElement("div",{className:"book-authors"},a.authors?a.authors.join(", "):"")," ")},v=function(e){var a=Object(n.useState)(""),t=Object(l.a)(a,2),r=t[0],c=t[1],i=Object(n.useState)([]),h=Object(l.a)(i,2),b=h[0],f=h[1],k=e.books,v=e.onBookShelfChange,g=function(e,a){v(e,a)},p=function(e){var a;""===e?f([]):(a=e,fetch("".concat(u,"/search"),{method:"POST",headers:Object(m.a)({},d,{"Content-Type":"application/json"}),body:JSON.stringify({query:a})}).then(function(e){return e.json()}).then(function(e){return e.books})).then(function(e){f(e=e||[])})};return o.a.createElement("div",{className:"search-container"},o.a.createElement("div",{className:"search-books"},o.a.createElement("div",{className:"search-books-bar"},o.a.createElement(s.b,{className:"close-search",to:"/dashboard"},"Close"),o.a.createElement("div",{className:"search-books-input-wrapper"},o.a.createElement("input",{className:"search-bar",type:"text",placeholder:"title, author",value:r,onChange:function(e){var a=e.target.value;c(a),p(a)}})))),o.a.createElement("div",{className:"search-results"},!b.error&&b.length>0&&b.map(function(e){return o.a.createElement(E,{key:e.id,book:(a=e,k.find(function(e){return e.id===a.id})||e),booksShelfChange:g});var a})))},g=function(e){var a=e.title,t=e.onBookShelfChange,n=e.books,r=function(e,a){t(e,a)};return o.a.createElement("div",{className:"book-shelf"},o.a.createElement("h2",{className:"book-shelf-title"},a),o.a.createElement("div",{className:"book-grid"},n.map(function(e){return o.a.createElement(E,{key:e.id,book:e,booksShelfChange:r})})))},p=function(e){var a=e.books,t=e.onBookShelfChange,n=function(e){return a.filter(function(a){return a.shelf===e})},r=function(e,a){t(e,a)};return o.a.createElement("div",{className:"book-main-container"},o.a.createElement(o.a.Fragment,null,o.a.createElement(g,{title:"Currently Reading",books:n("currentlyReading"),onBookShelfChange:r}),o.a.createElement(g,{title:"Want To Read",books:n("wantToRead"),onBookShelfChange:r}),o.a.createElement(g,{title:"Read",books:n("read"),onBookShelfChange:r})))},N=function(){var e=Object(n.useState)([]),a=Object(l.a)(e,2),t=a[0],r=a[1];Object(n.useEffect)(function(){fetch("".concat(u,"/books"),{headers:d}).then(function(e){return e.json()}).then(function(e){return e.books}).then(function(e){return r(e)})},[]);var c=function(e,a){e.shelf=a,r(t.filter(function(a){return a.id!==e.id}).concat([e])),function(e,a){fetch("".concat(u,"/books/").concat(e.id),{method:"PUT",headers:Object(m.a)({},d,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:a})}).then(function(e){return e.json()})}(e,a)};return o.a.createElement(s.a,null,o.a.createElement("div",{className:"app"},o.a.createElement(i.a,{exact:!0,path:"/",render:function(){return o.a.createElement(k,null)}}),o.a.createElement(i.a,{exact:!0,path:"/dashboard",render:function(){return o.a.createElement("div",{className:"books-container"},o.a.createElement("div",{className:"book-header"},o.a.createElement("h1",{className:"book-header-text"},"MyReads"),o.a.createElement(s.b,{to:"/"},"Home")),o.a.createElement(p,{books:t,onBookShelfChange:c}),o.a.createElement("div",{className:"open-search"},o.a.createElement(s.b,{to:"/search"},"Add a book")))}}),o.a.createElement(i.a,{path:"/search",render:function(){return o.a.createElement(v,{books:t,onBookShelfChange:c})}})))};c.a.render(o.a.createElement(N,null),document.getElementById("root"))}},[[17,2,1]]]);
//# sourceMappingURL=main.7090d16f.chunk.js.map